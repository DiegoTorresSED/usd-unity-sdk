#build_args:
#  no_python: --build-monolithic --alembic --no-python --no-imaging
#  full: --build-monolithic --alembic --openimageio
#usd_versions:
#  - version: 19.11
#  - version: 20.02
#---    
linux_v20.02_no_python:
  name: Build USD v20.02 on linux (no python)
  skip_checkout: true
  agent:
    type: Unity::VM
    image: filmtv/usd_build_linux_image:latest
    flavor: i1.medium
  commands:
    - |
      wget https://github.com/PixarAnimationStudios/USD/archive/v20.02.zip
      unzip v20.02.zip
      cd USD-20.02
      python build_scripts/build_usd.py --build-monolithic --alembic --no-python --no-imaging ../libs/usd-v20.02_no_python
  artifacts:
    linux_v20.02_no_python:
      paths:
        - "libs/usd-v20.02_no_python/**"

linux_v20.02:
  name: Build USD v20.02 on linux (full)
  skip_checkout: true
  agent:
    type: Unity::VM
    image: filmtv/usd_build_linux_image:latest
    flavor: i1.medium
  commands:
    - |
      wget https://github.com/PixarAnimationStudios/USD/archive/v20.02.zip
      unzip v20.02.zip
      cd USD-20.02
      python build_scripts/build_usd.py --build-monolithic --alembic --openimageio ../libs/usd-v20.02
  artifacts:
    linux_v20.02_no_python:
      paths:
        - "libs/usd-v20.02/**"